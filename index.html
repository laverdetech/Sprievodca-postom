<!DOCTYPE html>
<html lang="sk" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktívny Sprievodca Pôstom | Bezpečné Pôsty</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Cookie Lišta Skripty -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://www.cookie-lista.cz/jquery.ihavecookies.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A; /* Slate 900 */
            color: #CBD5E1; /* Slate 300 */
        }
        h1, h2, h3 {
            font-family: 'Poppins', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(to right, #38BDF8, #A78BFA);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .card {
            background-color: #1E293B; /* Slate 800 */
            border: 1px solid #334155; /* Slate 700 */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .btn-primary {
            background-color: #38BDF8; /* Sky 500 */
            color: #0F172A;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #7DD3FC; /* Sky 300 */
        }
        .btn-secondary {
            background-color: #334155; /* Slate 700 */
            color: #E2E8F0; /* Slate 200 */
            transition: background-color 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #475569; /* Slate 600 */
        }
        .btn-danger {
            background-color: #F43F5E; /* Rose 500 */
            color: #FFFFFF;
            transition: background-color 0.3s ease;
        }
        .btn-danger:hover {
            background-color: #FB7185; /* Rose 400 */
        }
        .timer-circle {
            transition: stroke-dashoffset 1s linear, stroke 1s linear;
        }
        .program-card.selected {
            border-color: #38BDF8;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.3);
        }
        /* Animácie */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }
        #notification-fallback {
            transition: opacity 0.5s, transform 0.5s;
        }
    </style>
</head>
<body class="antialiased">
    <!-- Modálne okno pre bezpečnostné upozornenie -->
    <div id="safetyModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop">
        <div class="bg-[#1E293B] border border-slate-700 rounded-2xl shadow-2xl w-full max-w-md p-8 text-center fade-in">
            <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-yellow-500/10 mb-4">
                <i data-lucide="shield-alert" class="h-8 w-8 text-yellow-400"></i>
            </div>
            <h2 class="text-2xl font-bold text-white mb-3">Dôležité Upozornenie</h2>
            <p class="text-slate-400 mb-6">
                Informácie v tejto aplikácii nenahrádzajú lekárske poradenstvo. Pred začatím akéhokoľvek pôstu sa vždy poraďte so svojím lekárom, najmä ak máte zdravotné problémy.
            </p>
            <button id="acceptSafety" class="w-full btn-primary font-bold py-3 px-6 rounded-lg text-lg">
                Rozumiem a súhlasím
            </button>
        </div>
    </div>

    <!-- Modálne okno po dokončení pôstu -->
    <div id="completionModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop">
        <div class="bg-[#1E293B] border border-slate-700 rounded-2xl shadow-2xl w-full max-w-lg p-8 text-center fade-in">
            <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-500/10 mb-4">
                <i data-lucide="party-popper" class="h-8 w-8 text-green-400"></i>
            </div>
            <h2 id="completionTitle" class="text-2xl font-bold text-white mb-2">Gratulujeme!</h2>
            <p id="completionTime" class="text-slate-400 mb-6">Pôst ukončený: ...</p>
            
            <div class="text-left space-y-6">
                <div>
                    <h3 class="text-lg font-semibold text-sky-400 mb-2">Čo si týmto pôstom získal/a:</h3>
                    <ul id="completionBenefits" class="list-disc list-inside text-slate-300 space-y-1 pl-2">
                        <!-- Benefity sa vložia sem -->
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-amber-400 mb-2">Odporúčania na prvé jedlo:</h3>
                    <ul id="completionRefeed" class="list-disc list-inside text-slate-300 space-y-1 pl-2">
                        <!-- Odporúčania sa vložia sem -->
                    </ul>
                </div>
            </div>

            <button id="closeCompletionModal" class="mt-10 w-full btn-primary font-bold py-4 px-6 rounded-lg text-lg">
                Skvelé!
            </button>
        </div>
    </div>

    <!-- Modálne okno pre prípravu na pôst -->
    <div id="preparationModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop">
        <div class="bg-[#1E293B] border border-slate-700 rounded-2xl shadow-2xl w-full max-w-lg fade-in flex flex-col max-h-[90vh]">
            
            <div class="p-8 pb-4 text-center flex-shrink-0">
                <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/10 mb-4">
                    <i data-lucide="clipboard-check" class="h-8 w-8 text-sky-400"></i>
                </div>
                <h2 id="preparationTitle" class="text-2xl font-bold text-white">Príprava na pôst</h2>
            </div>
            
            <div id="preparationContent" class="text-left space-y-6 overflow-y-auto px-8 flex-grow">
                <!-- Obsah sa vloží dynamicky -->
            </div>

            <div class="border-t border-slate-700 p-8 pt-6 flex-shrink-0">
                 <p class="text-sm text-center text-slate-400 mb-6"><i data-lucide="alert-circle" class="inline-block w-4 h-4 mr-1"></i>Počas pôstu je kľúčové nekonzumovať žiadne kalórie. Akékoľvek jedlo alebo sladený nápoj preruší procesy v tele.</p>
                 <div class="flex gap-4">
                    <button id="startFastConfirmBtn" class="w-full btn-primary font-bold py-4 px-6 rounded-lg text-lg">Spustiť pôst</button>
                    <button id="cancelFastBtn" class="w-full btn-secondary font-bold py-4 px-6 rounded-lg text-lg">Zrušiť</button>
                 </div>
            </div>
        </div>
    </div>


    <!-- Fallback pre notifikácie -->
    <div id="notification-fallback" class="hidden fixed top-5 right-5 z-50 bg-green-600 text-white p-4 rounded-lg shadow-lg">
        Gratulujeme! Dosiahli ste svoj cieľ pôstu.
    </div>

    <!-- Hlavný obsah -->
    <div id="mainContent" class="hidden">
        <!-- Hlavička -->
        <header class="relative pt-6 pb-8 px-4 text-center fade-in">
            <!-- Hamburger Menu -->
            <div class="absolute top-6 right-6 z-40">
                <div class="relative">
                    <button id="menu-toggle" class="p-2 rounded-full bg-slate-800/60 backdrop-blur-sm hover:bg-slate-700/80 transition-colors">
                        <i data-lucide="menu" class="text-white w-6 h-6"></i>
                    </button>
                    <div id="menu-panel" class="hidden absolute top-full right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-lg py-2">
                        <a href="https://sprievodca-postom-protokoly.netlify.app/" target="_blank" class="flex items-center gap-3 px-4 py-2 text-slate-300 hover:bg-slate-700/50 transition-colors">
                            <i data-lucide="book-open-check" class="w-5 h-5 text-sky-400"></i>
                            <span>Pôstne Protokoly</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Logo v Hlavičke -->
            <div class="flex justify-center mb-4">
                <a href="#">
                    <img src="https://res.cloudinary.com/ddqrq1sf6/image/upload/v1756661106/Sni%CC%81mka_obrazovky_2025-08-31_o_19.22.41_vomkxx.png" alt="Logo Sprievodca Pôstom" class="h-32 w-32 object-contain">
                </a>
            </div>

            <h1 class="text-4xl md:text-6xl font-bold mb-4">
                <span class="gradient-text">Pôst pre každého.</span><br>
                <span class="text-white">Bezpečne.</span>
            </h1>
            <p class="max-w-2xl mx-auto text-lg text-slate-400">
                Váš interaktívny sprievodca svetom pôstu. Objavte jeho benefity s nástrojmi, ktoré kladú dôraz na vašu bezpečnosť.
            </p>
        </header>

        <main class="px-4 md:px-8">
            <!-- Sekcia Časovača -->
            <section id="timer-section" class="max-w-4xl mx-auto mb-16 fade-in" style="animation-delay: 200ms;">
                <div class="card rounded-2xl p-6 md:p-10 shadow-2xl">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <!-- Vizuál časovača -->
                        <div class="relative w-64 h-64 mx-auto flex items-center justify-center">
                            <svg class="absolute inset-0" viewBox="0 0 100 100">
                                <circle class="text-slate-700" stroke-width="7" stroke="currentColor" fill="transparent" r="45" cx="50" cy="50" />
                                <circle id="timer-progress"
                                    class="timer-circle"
                                    stroke-width="7"
                                    stroke-dasharray="283"
                                    stroke-dashoffset="283"
                                    stroke-linecap="round"
                                    stroke="#38BDF8"
                                    fill="transparent"
                                    r="45"
                                    cx="50"
                                    cy="50"
                                    transform="rotate(-90 50 50)" />
                            </svg>
                            <div class="text-center">
                                <div id="time-display" class="text-5xl font-bold text-white">16:00:00</div>
                                <div id="fast-stage" class="text-sky-400 font-semibold mt-1">Pripravený na štart</div>
                            </div>
                        </div>
                        <!-- Ovládanie a tipy -->
                        <div class="text-center md:text-left">
                            <h2 class="text-3xl font-bold text-white mb-4">Interaktívny Časovač</h2>
                            <div class="card p-4 rounded-lg mb-6 border-l-4 border-sky-400 bg-slate-900/50">
                                <h3 class="font-semibold text-white mb-1">Adaptívny tip:</h3>
                                <p id="adaptive-tip" class="text-slate-300 text-sm">Vyberte si program a stlačte štart pre začatie vašej cesty pôstom.</p>
                            </div>
                            <div class="flex justify-center md:justify-start space-x-4">
                                <button id="startBtn" class="btn-primary font-bold py-4 px-6 rounded-lg flex items-center gap-2"><i data-lucide="play" class="w-5 h-5"></i>Štart</button>
                                <button id="pauseBtn" class="btn-secondary font-bold py-4 px-6 rounded-lg hidden items-center gap-2"><i data-lucide="pause" class="w-5 h-5"></i>Pauza</button>
                                <button id="stopBtn" class="btn-danger font-bold py-4 px-6 rounded-lg hidden items-center gap-2"><i data-lucide="stop-circle" class="w-5 h-5"></i>Stop</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sekcia programov -->
            <section id="programs" class="max-w-6xl mx-auto mb-16 fade-in" style="animation-delay: 400ms;">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 text-white">Vyberte si svoj program pôstu</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Karty programov budú generované dynamicky -->
                </div>
            </section>
            
            <!-- Sekcia Bezpečnosť -->
            <section id="safety" class="max-w-4xl mx-auto mb-16 fade-in" style="animation-delay: 600ms;">
                <div class="card rounded-2xl p-6 md:p-10 border-l-4 border-yellow-400 bg-yellow-500/5">
                    <div class="flex items-start gap-4">
                        <i data-lucide="alert-triangle" class="w-8 h-8 text-yellow-400 flex-shrink-0 mt-1"></i>
                        <div>
                            <h2 class="text-3xl font-bold text-white mb-4">Bezpečnosť na prvom mieste</h2>
                            <p class="text-slate-300 mb-4">Pôst nie je vhodný pre každého. Rizikové skupiny ako tehotné ženy, ľudia s cukrovkou, poruchami príjmu potravy alebo podváhou by nemali držať pôst bez lekárskeho dohľadu.</p>
                            <h3 class="text-xl font-semibold text-white mt-6 mb-3">Ukončenie pôstu (Refeeding)</h3>
                            <p class="text-slate-300">Po dlhšom pôste (>24h) je kľúčové začať jesť pomaly. Začnite ľahkým jedlom ako vývar alebo polievka. Vyhnite sa cukrom a prejedaniu, aby ste predišli refeeding syndrómu.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center p-8 text-slate-500 text-sm">
            <img src="https://res.cloudinary.com/ddqrq1sf6/image/upload/v1756661106/Sni%CC%81mka_obrazovky_2025-08-31_o_19.22.41_vomkxx.png" alt="Logo Sprievodca Pôstom" class="w-32 h-32 object-contain mx-auto mb-4">
            <p>&copy; 2025 Interaktívny Sprievodca Pôstom. Všetky práva vyhradené.</p>
            <p class="mt-2 max-w-2xl mx-auto">Tento nástroj slúži len na edukačné účely a nenahrádza odborné lekárske poradenstvo. Vždy konzultujte svoje zámery s lekárom.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            // --- Elementy ---
            const timeDisplay = document.getElementById('time-display');
            const fastStage = document.getElementById('fast-stage');
            const adaptiveTip = document.getElementById('adaptive-tip');
            const progressCircle = document.getElementById('timer-progress');
            const startBtn = document.getElementById('startBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const stopBtn = document.getElementById('stopBtn');
            const programsContainer = document.querySelector('#programs .grid');
            const notificationFallback = document.getElementById('notification-fallback');
            const menuToggle = document.getElementById('menu-toggle');
            const menuPanel = document.getElementById('menu-panel');
            
            const completionModal = document.getElementById('completionModal');
            const completionTitle = document.getElementById('completionTitle');
            const completionTime = document.getElementById('completionTime');
            const completionBenefits = document.getElementById('completionBenefits');
            const completionRefeed = document.getElementById('completionRefeed');
            const closeCompletionModal = document.getElementById('closeCompletionModal');
            
            const preparationModal = document.getElementById('preparationModal');
            const preparationTitle = document.getElementById('preparationTitle');
            const preparationContent = document.getElementById('preparationContent');
            const startFastConfirmBtn = document.getElementById('startFastConfirmBtn');
            const cancelFastBtn = document.getElementById('cancelFastBtn');

            
            // --- Modálne okno ---
            const safetyModal = document.getElementById('safetyModal');
            const acceptSafetyBtn = document.getElementById('acceptSafety');
            const mainContent = document.getElementById('mainContent');

            acceptSafetyBtn.addEventListener('click', () => {
                safetyModal.style.display = 'none';
                mainContent.style.display = 'block';
            });

            // --- Dáta pre okno po pôste ---
            const fastProtocols = {
              "12": {
                "title": "12-hodinový pôst",
                "benefits": [
                  "Tvoje telo spotrebovalo prebytočný cukor a začalo čerpať energiu zo zásob.",
                  "Tvoj tráviaci systém si oddýchol, čo podporilo jeho regeneráciu.",
                  "Získal/a si lepší spánok a pocit ľahkosti."
                ],
                "refeed": [
                  "Začni malým jedlom s nízkym obsahom cukru.",
                  "Ľahké bielkoviny (vajíčko, jogurt) alebo zelenina.",
                  "Vyhni sa ťažkým mastným jedlám hneď po pôste."
                ]
              },
              "16": {
                "title": "16-hodinový pôst",
                "benefits": [
                  "Zvýšil/a si citlivosť na inzulín, čo pomáha lepšie regulovať cukor v krvi.",
                  "Tvoje telo preplo na spaľovanie tukov ako primárny zdroj energie.",
                  "Získal/a si viac mentálnej energie a lepšie sústredenie."
                ],
                "refeed": [
                  "Začni ľahkým jedlom s vlákninou alebo zeleninovým vývarom.",
                  "Dobre sú ľahko stráviteľné bielkoviny (kuracie mäso, ryba).",
                  "Vyhni sa veľkým dávkam sladkostí alebo alkoholu."
                ]
              },
              "24": {
                "title": "24-hodinový pôst",
                "benefits": [
                  "Aktivoval/a si v tele autofágiu – proces bunkovej očisty a recyklácie.",
                  "Znížil/a si zápalové procesy v tele a podporil/a si svoje zdravie.",
                  "Tvoja energia sa stabilizovala a dosiahol/a si stav mentálnej jasnosti."
                ],
                "refeed": [
                  "Začni veľmi ľahkým jedlom – vývar, polievka alebo dusená zelenina.",
                  "Počkajte 1–2 hodiny a až potom konzumujte väčšie jedlo.",
                  "Vyhýbaj sa mastným a ťažkým jedlám, aby si nezaťažil trávenie."
                ]
              },
              "36": {
                "title": "36-hodinový pôst",
                "benefits": [
                  "Dosiahol/a si hlbokú úroveň autofágie, tvoje telo intenzívne opravuje bunky.",
                  "Optimalizoval/a si hormonálnu rovnováhu a zvýšil/a si hladinu rastového hormónu.",
                  "Prešiel/a si výrazným detoxom, ktorý prináša pocit pokoja a očisty."
                ],
                "refeed": [
                  "Začni malými dávkami tekutín – vývar, smoothies alebo zeleninová polievka.",
                  "Po 30–60 minútach môžeš pridať ľahké bielkoviny a zeleninu.",
                  "Neodporúča sa okamžite veľké jedlo – postupne zvyšuj objem."
                ]
              },
              "48": {
                "title": "48-hodinový pôst",
                "benefits": [
                  "Absolvoval/a si hĺbkovú bunkovú regeneráciu vďaka silnej autofágii.",
                  "Výrazne si podporil/a obnovu tkanív vďaka zvýšenej produkcii rastového hormónu.",
                  "Tvoje telo efektívne spaľovalo tuky v stave hlbokej ketózy."
                ],
                "refeed": [
                  "Začni pomaly – odporúča sa 1–2 malé porcie vývaru alebo varená zelenina.",
                  "Postupne pridaj ľahké bielkoviny (ryba, kuracie mäso).",
                  "Až po pár hodinách môžeš zaradiť komplexnejšie jedlo."
                ]
              },
              "72": {
                "title": "72-hodinový pôst",
                "benefits": [
                    "Naštartoval/a si komplexnú regeneráciu imunitného systému a tvorbu nových buniek.",
                    "Dosiahol/a si maximálnu úroveň bunkovej očisty (autofágie).",
                    "Tvoje telo fungovalo v optimálnom režime spaľovania tukov (ketóza).",
                    "Získal/a si jedinečný stav mentálnej jasnosti a pocit telesného 'reštartu'."
                ],
                "refeed": [
                  "Začni veľmi opatrne – malá dávka vývaru alebo tekutá polievka.",
                  "Počkajte aspoň 1–2 hodiny pred ďalším jedlom.",
                  "Vyhni sa alkoholu, mastným a veľmi ťažkým jedlám aspoň 24 hodín po ukončení.",
                  "Dôležitá je postupnosť – malými krokmi obnovuj trávenie."
                ]
              }
            };
            
            // --- Dáta pre prípravné okno ---
             const preparationProtocols = {
                "12": {
                    title: "Príprava na 12-hodinový pôst",
                    sections: {
                        "Príprava posledného jedla": ["Posledné jedlo si daj ľahké a vyvážené.", "Vyhni sa ťažkým jedlám a veľkému množstvu cukru pred začiatkom."],
                        "Odporúčaný čas začiatku": ["<strong>Ideálny začiatok:</strong> Medzi 18:00 - 19:00.", "Ukončením jedla v tomto čase podporíš svoj spánkový cyklus a zosúladíš sa s prirodzeným rytmom tela."],
                        "Povolené tekutiny": ["Počas pôstu pi čistú vodu alebo nesladený bylinkový čaj."]
                    }
                },
                "16": {
                    title: "Príprava na 16-hodinový pôst",
                     sections: {
                        "Príprava posledného jedla": ["Posledné jedlo by malo byť bohaté na bielkoviny, zdravé tuky a vlákninu, aby si sa cítil/a dlhšie sýty/a.", "Príklad: Grilované kuracie prsia so zeleninovým šalátom a avokádom."],
                        "Odporúčaný čas začiatku": ["<strong>Ideálny začiatok:</strong> Medzi 15:00 - 16:00.", "Telo má ráno najvyššiu citlivosť na inzulín. Týmto načasovaním ukončíš pôst zdravými raňajkami medzi 7:00 a 8:00 a zosúladíš sa so svojím prirodzeným cirkadiánnym rytmom."],
                        "Povolené tekutiny": ["Povolená je voda, nesladené čaje a čierna káva bez mlieka a cukru."]
                    }
                },
                "24": {
                    title: "Príprava na 24-hodinový pôst",
                     sections: {
                        "Príprava posledného jedla": ["Deň pred pôstom jedz normálne, ale hydratuj sa viac ako zvyčajne.", "Posledné jedlo zvoľ nutrične bohaté, no nie príliš veľké, aby si nezaťažil/a trávenie."],
                        "Odporúčaný čas začiatku": ["<strong>Ideálny začiatok:</strong> Po obede, okolo 14:00.", "Pôst tak ukončíš obedom na ďalší deň. Tým sa vyhneš jedeniu neskoro večer a rešpektuješ denný rytmus tela."],
                        "Povolené tekutiny": ["Kľúčová je hydratácia! Pi vodu, čaj, čiernu kávu.", "Zváž pridanie štipky kvalitnej soli do vody na doplnenie sodíka."]
                    }
                },
                "36": {
                    title: "Príprava na 36-hodinový pôst",
                     sections: {
                        "Príprava posledného jedla": ["Dva dni pred pôstom sa zameraj na čistú stravu a zvýšenú hydratáciu.", "Posledné jedlo by malo byť výživné, s dostatkom bielkovín a zdravých tukov."],
                        "Odporúčaný čas začiatku": ["<strong>Ideálny začiatok:</strong> Večer okolo 18:00 - 19:00.", "Toto načasovanie maximalizuje súlad s tvojím cirkadiánnym rytmom, keďže sa vyhýbaš jedlu počas celej noci a nasledujúceho dňa."],
                        "Povolené tekutiny": ["Nezabudni na elektrolyty! Počas dňa si môžeš pripraviť vodu so soľou, prípadne doplniť draslík a horčík.", "Voda, čaj a káva sú tvoji spoločníci."]
                    }
                },
                "48": {
                    title: "Príprava na 48-hodinový pôst",
                     sections: {
                        "Príprava posledného jedla": ["Príprava je kľúčová. Aspoň 2-3 dni vopred jedz ľahkú stravu bez spracovaných potravín.", "Dôkladne sa hydratuj a zváž postupné znižovanie príjmu sacharidov."],
                        "Odporúčaný čas začiatku": ["<strong>Strategický začiatok:</strong> Po skorej večeri, okolo 18:00.", "Maximalizuješ tak čas spánku počas pôstu a podporíš prirodzené regeneračné procesy tela v noci."],
                        "Povolené tekutiny": ["<strong>Elektrolyty sú nevyhnutné!</strong> Pravidelne dopĺňaj sodík, draslík a horčík, aby si predišiel/la slabosti a bolestiam hlavy."]
                    }
                },
                "72": {
                    title: "Príprava na 72-hodinový pôst",
                     sections: {
                        "Príprava posledného jedla": ["Tento pôst vyžaduje skúsenosti. Týždeň vopred sa vyhýbaj cukru a spracovaným jedlám.", "Posledné jedlo musí byť nutrične husté, ale nie ťažké."],
                        "Odporúčaný čas začiatku": ["<strong>Strategický začiatok:</strong> Večer okolo 18:00.", "Tým si zabezpečíš, že najťažšie fázy budú zahŕňať spánok a rešpektuješ denný cyklus tela."],
                        "Povolené tekutiny": ["<strong>Prísny režim elektrolytov je absolútne kritický pre bezpečnosť.</strong> Monitoruj, ako sa cítiš a neváhaj pôst prerušiť, ak sa cítiš zle."]
                    }
                }
            };


            // --- Dáta programov ---
            const programsData = [
                { id: 12, title: "12-hodinový pôst", desc: "Základný cyklus, ideálny pre začiatočníkov.", icon: 'sunrise' },
                { id: 16, title: "16-hodinový pôst", desc: "Populárna metóda 16/8, podporuje spaľovanie tukov.", icon: 'clock' },
                { id: 24, title: "24-hodinový pôst", desc: "Aktivuje bunkovú obnovu (autofágiu).", icon: 'recycle' },
                { id: 36, title: "36-hodinový pôst", desc: "Pre pokročilých, podporuje metabolický reset.", icon: 'zap' },
                { id: 48, title: "48-hodinový pôst", desc: "Zlepšuje inzulínovú senzitivitu. Len so skúsenosťami.", icon: 'shield-check' },
                { id: 72, title: "72-hodinový pôst", desc: "Vyžaduje lekársky dohľad a opatrný refeeding.", icon: 'gem' },
            ];

            // --- Stav aplikácie ---
            let timerInterval;
            let selectedProgram = 16;
            const radius = 45;
            const circumference = 2 * Math.PI * radius;

            // --- Funkcie pre gradient farby ---
            function hexToRgb(hex) {
                let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : null;
            }

            function lerpColor(color1, color2, factor) {
                const c1 = hexToRgb(color1);
                const c2 = hexToRgb(color2);
                if (!c1 || !c2) return color1;

                const r = Math.round(c1.r + factor * (c2.r - c1.r));
                const g = Math.round(c1.g + factor * (c2.g - c1.b));
                const b = Math.round(c1.b + factor * (c2.b - c1.b));
                return `rgb(${r}, ${g}, ${b})`;
            }

            // --- Notifikácie ---
            function requestNotificationPermission() {
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            }

            // --- Logika časovača s localStorage (zabezpečená) ---

            function getFastState() {
                try {
                    return {
                        state: localStorage.getItem('fastState') || 'stopped',
                        startTime: parseInt(localStorage.getItem('fastStartTime') || '0', 10),
                        pauseTime: parseInt(localStorage.getItem('fastPauseTime') || '0', 10),
                        totalPausedMs: parseInt(localStorage.getItem('fastTotalPausedMs') || '0', 10),
                        programHours: parseInt(localStorage.getItem('fastProgramHours') || '16', 10),
                    };
                } catch (e) {
                    console.warn("localStorage nie je k dispozícii. Stav nebude uložený.", e);
                    return { state: 'stopped', startTime: 0, pauseTime: 0, totalPausedMs: 0, programHours: 16 };
                }
            }

            function setFastState(newState) {
                try {
                    const state = { ...getFastState(), ...newState };
                    localStorage.setItem('fastState', state.state);
                    localStorage.setItem('fastStartTime', state.startTime.toString());
                    localStorage.setItem('fastPauseTime', state.pauseTime.toString());
                    localStorage.setItem('fastTotalPausedMs', state.totalPausedMs.toString());
                    localStorage.setItem('fastProgramHours', state.programHours.toString());
                } catch (e) {
                    console.warn("localStorage nie je k dispozícii. Stav sa nepodarilo uložiť.", e);
                }
            }
            
            function clearFastState() {
                 try {
                    localStorage.removeItem('fastState');
                    localStorage.removeItem('fastStartTime');
                    localStorage.removeItem('fastPauseTime');
                    localStorage.removeItem('fastTotalPausedMs');
                } catch (e) {
                     console.warn("localStorage nie je k dispozícii. Stav sa nepodarilo vymazať.", e);
                }
            }

            function showCompletionModal(programHours) {
                const protocol = fastProtocols[programHours];
                if (!protocol) return;

                completionTitle.textContent = `Gratulujeme! Dokončil/a si svoj ${programHours}-hodinový pôst`;
                
                const now = new Date();
                const formattedEndTime = now.toLocaleString('sk-SK', {
                    day: 'numeric', month: 'long', year: 'numeric', 
                    hour: '2-digit', minute: '2-digit'
                }).replace(',', '');
                completionTime.textContent = `Pôst ukončený: ${formattedEndTime}`;

                completionBenefits.innerHTML = protocol.benefits.map(b => `<li>${b}</li>`).join('');
                completionRefeed.innerHTML = protocol.refeed.map(r => `<li>${r}</li>`).join('');

                completionModal.classList.remove('hidden');
            }
            
            function showPreparationModal(programHours) {
                const protocol = preparationProtocols[programHours];
                if (!protocol) return;

                preparationTitle.textContent = protocol.title;
                
                let contentHTML = '';
                for (const [title, points] of Object.entries(protocol.sections)) {
                    contentHTML += `
                        <div>
                            <h3 class="text-lg font-semibold text-sky-400 mb-2">${title}</h3>
                            <ul class="list-disc list-inside text-slate-300 space-y-1 pl-2">
                                ${points.map(p => `<li>${p}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                const now = new Date();
                const endTime = new Date(now.getTime() + programHours * 60 * 60 * 1000);
                const formattedEndTime = endTime.toLocaleString('sk-SK', {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'long',
                    hour: '2-digit',
                    minute: '2-digit'
                }).replace(',', '');

                const endTimeHTML = `
                    <div class="mt-4 p-4 rounded-lg bg-slate-900/50 border border-slate-700">
                        <div class="flex items-center gap-3">
                            <i data-lucide="calendar-check" class="w-5 h-5 text-amber-400 flex-shrink-0"></i>
                            <div>
                                <h4 class="font-semibold text-white">Predbežný koniec pôstu:</h4>
                                <p class="text-amber-400 font-medium">${formattedEndTime}</p>
                            </div>
                        </div>
                    </div>
                `;

                preparationContent.innerHTML = contentHTML + endTimeHTML;

                preparationModal.classList.remove('hidden');
                lucide.createIcons();
            }


            function tick() {
                const { state, startTime, totalPausedMs, programHours } = getFastState();
                
                if (state !== 'running') return;

                const totalDurationSec = programHours * 3600;
                const elapsedMs = Date.now() - startTime - totalPausedMs;
                const remainingSeconds = Math.max(0, totalDurationSec - Math.floor(elapsedMs / 1000));

                updateDisplay(remainingSeconds, totalDurationSec);

                if (remainingSeconds <= 0) {
                    stopTimer(true);
                }
            }
            
            function beginFast() {
                requestNotificationPermission();
                setFastState({
                    state: 'running',
                    startTime: Date.now(),
                    pauseTime: 0,
                    totalPausedMs: 0,
                    programHours: selectedProgram
                });
                
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(tick, 1000);
                
                updateButtonUI('running');
                tick();
            }

            function pauseTimer() {
                const { state, pauseTime } = getFastState();

                if (state === 'running') { // Pause
                    setFastState({ state: 'paused', pauseTime: Date.now() });
                    if (timerInterval) clearInterval(timerInterval);
                    updateButtonUI('paused');
                } else if (state === 'paused') { // Resume
                    const pausedDuration = Date.now() - pauseTime;
                    const { totalPausedMs } = getFastState();
                    setFastState({
                        state: 'running',
                        pauseTime: 0,
                        totalPausedMs: totalPausedMs + pausedDuration
                    });
                    if (timerInterval) clearInterval(timerInterval);
                    timerInterval = setInterval(tick, 1000);
                    updateButtonUI('running');
                }
                 updateStatusUI();
            }
            
            function stopTimer(completed = false) {
                clearInterval(timerInterval);
                timerInterval = null;
                
                const { programHours } = getFastState();

                if (completed) {
                    showCompletionModal(programHours);
                } else {
                    fastStage.textContent = "Pôst zastavený";
                    adaptiveTip.textContent = "Každý krok sa počíta. Nabudúce to pôjde lepšie!";
                }
                
                const lastProgram = getFastState().programHours;
                clearFastState();
                setFastState({ state: 'stopped', programHours: lastProgram });
                updateButtonUI('stopped');
                
                if (!completed) {
                    setTimeout(() => {
                        resetUIToProgram(programHours);
                    }, 3000);
                }
            }
            
            function restoreTimerState() {
                const state = getFastState();
                selectedProgram = state.programHours;
                generateProgramCards();
                
                if (state.state === 'running' || state.state === 'paused') {
                    if (timerInterval) clearInterval(timerInterval);
                    if(state.state === 'running') {
                        timerInterval = setInterval(tick, 1000);
                    }
                    updateButtonUI(state.state);
                } else {
                    resetUIToProgram(selectedProgram);
                    updateButtonUI('stopped');
                }
                updateStatusUI();
            }

            // --- UI Funkcie ---
            function updateButtonUI(state) {
                startBtn.classList.toggle('hidden', state !== 'stopped');
                pauseBtn.classList.toggle('hidden', state === 'stopped');
                stopBtn.classList.toggle('hidden', state === 'stopped');

                if (state === 'paused') {
                    pauseBtn.innerHTML = `<i data-lucide="play" class="w-5 h-5"></i>Pokračovať`;
                } else {
                    pauseBtn.innerHTML = `<i data-lucide="pause" class="w-5 h-5"></i>Pauza`;
                }
                lucide.createIcons();
            }

            function generateProgramCards() {
                programsContainer.innerHTML = '';
                const { state } = getFastState();
                programsData.forEach(p => {
                    const isSelected = p.id === selectedProgram;
                    const card = document.createElement('div');
                    card.className = `program-card card rounded-xl p-6 cursor-pointer border-2 ${isSelected ? 'selected' : 'border-transparent'} ${state !== 'stopped' ? 'opacity-50 cursor-not-allowed' : ''}`;
                    card.dataset.duration = p.id;
                    card.innerHTML = `
                        <div class="flex items-center gap-4 mb-3">
                            <div class="bg-slate-700/50 p-3 rounded-lg"><i data-lucide="${p.icon}" class="w-6 h-6 text-sky-400"></i></div>
                            <h3 class="text-xl font-bold text-white">${p.title}</h3>
                        </div>
                        <p class="text-slate-400">${p.desc}</p>
                    `;
                    card.addEventListener('click', () => {
                        if (getFastState().state === 'stopped') {
                            selectProgram(p.id)
                        }
                    });
                    programsContainer.appendChild(card);
                });
                lucide.createIcons();
            }

            function selectProgram(durationHours) {
                selectedProgram = durationHours;
                setFastState({ programHours: durationHours });
                resetUIToProgram(durationHours);
                generateProgramCards();
            }

            function resetUIToProgram(programHours) {
                const totalSeconds = programHours * 3600;
                updateDisplay(totalSeconds, totalSeconds);
            }

            function updateDisplay(secondsRemaining, totalDurationSec) {
                const hours = Math.floor(secondsRemaining / 3600);
                const minutes = Math.floor((secondsRemaining % 3600) / 60);
                const seconds = secondsRemaining % 60;
                timeDisplay.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                const progress = totalDurationSec > 0 ? (totalDurationSec - secondsRemaining) / totalDurationSec : 0;
                const offset = circumference * (1 - progress);
                progressCircle.style.strokeDashoffset = offset;

                const startColor = "#38BDF8"; // Sky 400
                const endColor = "#FBBF24";   // Amber 400
                progressCircle.style.stroke = lerpColor(startColor, endColor, progress);

                updateStatusUI();
            }
            
            function updateStatusUI() {
                const { state, startTime, totalPausedMs, programHours } = getFastState();
                let hoursElapsed = 0;
                let elapsedMs = 0;
                if (state !== 'stopped' && startTime > 0) {
                    elapsedMs = Date.now() - startTime - totalPausedMs;
                    hoursElapsed = elapsedMs / (1000 * 3600);
                }
                
                let stage = "Pripravený na štart";
                let tip = "Vyberte si program a stlačte štart.";
                let useHtml = false;

                if (state === 'running' || state === 'paused') {
                    if (hoursElapsed < 4) {
                        stage = "Trávenie";
                    } else if (hoursElapsed < 12) {
                        stage = "Začiatok spaľovania tukov";
                    } else if (hoursElapsed < 18) {
                        stage = "Spaľovanie tukov";
                    } else if (hoursElapsed < 24) {
                        stage = "Autofágia aktivovaná";
                    } else if (hoursElapsed < 48) {
                        stage = "Hlboká ketóza";
                    } else {
                        stage = "Maximálna autofágia";
                    }

                    const TEN_MINUTES_MS = 10 * 60 * 1000;
                    if (elapsedMs < TEN_MINUTES_MS && startTime > 0) {
                        const endTime = new Date(startTime + programHours * 3600 * 1000);
                        const formattedEndTime = endTime.toLocaleString('sk-SK', {
                            day: 'numeric', month: 'numeric', year: 'numeric', 
                            hour: '2-digit', minute: '2-digit'
                        }).replace(',', '');
                        tip = `<strong>Koniec pôstu:</strong> ${formattedEndTime}`;
                        useHtml = true;
                    } else {
                        if (stage === "Trávenie") {
                            tip = "Telo spracováva posledné jedlo. Hladina cukru je stabilná.";
                        } else if (stage === "Začiatok spaľovania tukov") {
                            tip = "Zásoby glykogénu sa míňajú. Pite dostatok vody.";
                        } else if (stage === "Spaľovanie tukov") {
                            tip = "Telo začína produkovať ketóny ako zdroj energie.";
                        } else if (stage === "Autofágia aktivovaná") {
                            tip = "Začína sa proces bunkovej obnovy. Gratulujeme!";
                        } else if (stage === "Hlboká ketóza") {
                            tip = "Telo je v plnom režime spaľovania tukov. Sledujte príznaky a doplňte elektrolyty.";
                        } else {
                            tip = "Dosahujete maximálne benefity. Pri dlhých pôstoch je kľúčová opatrnosť.";
                        }
                    }
                }
                
                if (state === 'paused'){
                    stage = "Pauza";
                }

                fastStage.textContent = stage;
                if (useHtml) {
                    adaptiveTip.innerHTML = tip;
                } else {
                    adaptiveTip.textContent = tip;
                }
            }

            // --- Inicializácia ---
            function init() {
                progressCircle.style.strokeDasharray = circumference;
                progressCircle.style.strokeDashoffset = circumference;
                restoreTimerState();
                initializeCookieBanner();
            }

            function initializeCookieBanner() {
                try {
                    if (window.jQuery && typeof window.jQuery.fn.ihavecookies === 'function') {
                        var options = {
                            box_umisteni:"bottom:0;left:0;",
                            box_sirka:"100%",
                            box_odsazeni:"0px",
                            box_odsazeni_obsah:"20px",
                            box_zaobleni: "0px",
                            box_stin_ver:"-5px",
                            box_stin_roz:"15px",
                            box_stin_barva:"rgba(0,0,0,0.2)",
                            pozadi_obrazek:"",
                            pozadi_barva:"rgb(30, 41, 59)",
                            title:"Používame súbory cookie",
                            title_color:"#FFFFFF",
                            title_size:"18px",
                            popis:"Naše webové stránky využívajú súbory cookie na zlepšenie vášho zážitku. Súhlasom nám pomáhate analyzovať návštevnosť a personalizovať obsah.",
                            popis_color:"#CBD5E1",
                            popis_size:"14px",
                            odkaz_text:"Viac informácií",
                            odkaz_url:"https://www.cookie-lista.cz/co-je-cookies.html",
                            odkaz_color:"#38BDF8",
                            odkaz_color_hover:"#7DD3FC",
                            tlacitko_1_text:"Povoliť všetko",
                            tlacitko_1_padding:"12px 24px",
                            tlacitko_1_margin:"10px",
                            tlacitko_1_text_barva:"#0F172A",
                            tlacitko_1_pozadi:"#38BDF8",
                            tlacitko_1_text_velikost:"14px",
                            tlacitko_1_text_barva_hover:"#0F172A",
                            tlacitko_1_pozadi_hover:"#7DD3FC",
                            tlacitko_1_radius:"8px",
                            tlacitko_2_text:"Iba nevyhnutné",
                            tlacitko_2_padding:"12px 24px",
                            tlacitko_2_margin:"10px",
                            tlacitko_2_text_barva:"#E2E8F0",
                            tlacitko_2_pozadi:"#334155",
                            tlacitko_2_text_velikost:"14px",
                            tlacitko_2_text_barva_hover:"#FFFFFF",
                            tlacitko_2_pozadi_hover:"#475569",
                            tlacitko_2_radius:"8px",
                            delay: 1500,
                            expires: 365,
                            uncheckBoxes: true,
                            tvurce: false,
                        };
                        $('body').ihavecookies(options);
                    }
                } catch (e) {
                    console.error("Nepodarilo sa inicializovať cookie lištu.", e);
                }
            }


            // --- Event Listeners ---
            startBtn.addEventListener('click', () => showPreparationModal(selectedProgram));
            pauseBtn.addEventListener('click', pauseTimer);
            stopBtn.addEventListener('click', () => stopTimer(false));
            
            startFastConfirmBtn.addEventListener('click', () => {
                preparationModal.classList.add('hidden');
                beginFast();
            });

            cancelFastBtn.addEventListener('click', () => {
                preparationModal.classList.add('hidden');
            });

            
            menuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                menuPanel.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!menuPanel.contains(e.target) && !menuToggle.contains(e.target)) {
                    menuPanel.classList.add('hidden');
                }
            });

            closeCompletionModal.addEventListener('click', () => {
                completionModal.classList.add('hidden');
                const lastProgram = getFastState().programHours;
                resetUIToProgram(lastProgram);
            });


            init();
        });
    </script>
    
    <!-- COOKIE LIŠTA v2.0 START - Inicializácia presunutá do hlavného skriptu -->
    <!-- COOKIE LIŠTA v2.0 KONIEC -->
</body>
</html>

